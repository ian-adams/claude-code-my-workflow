/*-- scss:defaults --*/

// Colors — Generic Academic (Charcoal & Teal)
$charcoal: #2C3E50;
$charcoal-light: #34495E;
$teal: #1ABC9C;
$teal-pale: #eef9f6;
$text: #222;
$text-muted: #6b7280;

$body-bg: #fff;
$body-color: $text;
$link-color: $charcoal;
$link-hover-color: $teal;
$headings-color: $charcoal;

// Bootstrap variable that controls inline code color
$code-color: #0e7c6b;

// Bootstrap variable that controls inline code background
$code-bg: rgba(26, 188, 156, 0.08);

/*-- scss:rules --*/

// ── Widen the main content column ──
// Quarto uses CSS Grid with hardcoded track sizes for page-columns.toc-left.
// The default body-content track is calc(800px - 3em). Override to 1100px.
body:not(.floating):not(.docked) .page-columns.toc-left {
  grid-template-columns:
    [screen-start] 1.5em
    [screen-start-inset] 5fr
    [page-start] 35px
    [page-start-inset] minmax(0px, 175px)
    [body-start-outset] 35px
    [body-start] 1.5em
    [body-content-start] minmax(450px, calc(1100px - 3em))
    [body-content-end] 1.5em
    [body-end] 50px
    [body-end-outset] minmax(0px, 200px)
    [page-end-inset] 35px
    [page-end] 5fr
    [screen-end-inset] 1.5em
    [screen-end] !important;
}

// ── Base ──
body {
  -webkit-font-smoothing: antialiased;
  font-size: 1.2rem;
  line-height: 1.75;
}

// ── WIP notice ──
#title-block-header {
  position: relative;

  &::before {
    content: 'Work in progress — I keep updating this as I learn new things.';
    font-weight: 700;
    display: block;
    background: #f0faf7;
    border: 1px solid #c8e8df;
    padding: 0.7em 1.1em;
    margin-bottom: 1.5em;
    font-size: 0.9em;
    color: #2a6b5a;
  }
}

// ── Title ──
.quarto-title {
  padding-bottom: 1.2em;
  border-bottom: 2px solid $teal;
  margin-bottom: 1.5em;
}

.quarto-title .title {
  font-size: 2.2em;
  font-weight: 700;
  color: $charcoal;
}

.quarto-title .subtitle {
  font-size: 1.05em;
  color: $text-muted;
  margin-top: 0.3em;
}

// ── Headings ──
h1, .h1 {
  font-size: 1.7em;
  margin-top: 2.5em;
  padding-bottom: 0.3em;
  border-bottom: 1px solid #ddd;
}

h2, .h2 {
  font-size: 1.3em;
  margin-top: 2em;
  color: $charcoal;
}

h3, .h3 {
  font-size: 1.1em;
  margin-top: 1.5em;
  color: $charcoal-light;
}

// ── TOC ──
#TOC {
  .active {
    font-weight: 600;
    color: $charcoal !important;
    border-left: 2px solid $teal;
    padding-left: 0.5em;
  }

  a {
    color: $text-muted;
    text-decoration: none;
    font-size: 1.1em;
    display: block;
    padding: 0.75em 0;

    &:hover { color: $charcoal; }
  }
}

// ── Inline code — force override Bootstrap defaults ──
p code,
li code,
td code,
th code,
a code,
span code,
.callout code,
blockquote code,
#quarto-content code:not(pre code) {
  font-size: 0.87em !important;
  padding: 0.15em 0.4em !important;
  background-color: rgba(26, 188, 156, 0.08) !important;
  color: #0e7c6b !important;
  border-radius: 3px !important;
}

pre code {
  background: transparent !important;
  color: inherit !important;
  padding: 0 !important;
  font-size: inherit !important;
}

pre {
  border: 1px solid #e5e5e5;
  border-radius: 4px;
}

pre:not(.sourceCode) {
  background: #f8f8f8;
  color: $text;
  font-size: 0.85em;
  line-height: 1.6;
}

// ── Tables ──
.table {
  border: 1px solid #ddd;

  thead {
    background: $charcoal;
    color: #fff;

    th {
      font-weight: 600;
      font-size: 0.9em;
      padding: 0.7em 0.9em;
      border: none;
    }
  }

  tbody {
    tr {
      &:nth-child(even) { background: #f9f9f9; }
      &:hover { background: $teal-pale; }

      td {
        padding: 0.6em 0.9em;
        border-top: 1px solid #eee;
        font-size: 0.92em;
      }
    }
  }
}

// ── Callouts ──
.callout {
  margin: 1.5em 0;
}

.callout-tip {
  border-left: 3px solid $teal;
  background: $teal-pale;
}

.callout-important {
  border-left: 3px solid #dc2626;
  background: #fef2f2;
}

.callout-warning {
  border-left: 3px solid #f59e0b;
  background: #fffbeb;
}

.callout-note {
  border-left: 3px solid $charcoal;
  background: #f0f4ff;
}

// ── Blockquotes ──
blockquote {
  border-left: 3px solid $teal;
  padding: 0.8em 1.2em;
  margin: 1.2em 0;
  background: $teal-pale;
  font-style: italic;
  color: #555;

  strong {
    color: $charcoal;
    font-style: normal;
  }
}

// ── Horizontal rules ──
hr {
  border: none;
  height: 1px;
  background: #ddd;
  margin: 2.5em 0;
}

// ── Links ──
#quarto-content a {
  text-decoration: underline;
  text-decoration-color: rgba($charcoal, 0.2);
  text-underline-offset: 2px;

  &:hover {
    text-decoration-color: $teal;
    color: $teal;
  }
}

// ── Responsive: tablets and small screens ──
@media (max-width: 991.98px) {
  // Remove the custom grid override so Quarto's default responsive grid takes over
  body:not(.floating):not(.docked) .page-columns.toc-left {
    grid-template-columns: none !important;
    display: block !important;
  }

  body {
    font-size: 1.05rem;
  }

  .quarto-title .title {
    font-size: 1.8em;
  }

  h1, .h1 {
    font-size: 1.4em;
  }

  h2, .h2 {
    font-size: 1.15em;
  }

  // Let tables scroll horizontally instead of overflowing
  .table-responsive,
  table {
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  // Pre blocks: ensure horizontal scroll
  pre {
    max-width: 100%;
    overflow-x: auto;
  }
}

// ── Responsive: phones ──
@media (max-width: 575.98px) {
  body {
    font-size: 1rem;
    padding: 0 0.5em;
  }

  .quarto-title .title {
    font-size: 1.5em;
  }

  .quarto-title .subtitle {
    font-size: 0.9em;
  }

  h1, .h1 {
    font-size: 1.3em;
  }

  h2, .h2 {
    font-size: 1.1em;
  }

  #TOC a {
    font-size: 0.95em;
    padding: 0.5em 0;
  }

  .table thead th {
    font-size: 0.8em;
    padding: 0.5em 0.6em;
  }

  .table tbody td {
    font-size: 0.85em;
    padding: 0.4em 0.6em;
  }

  .callout {
    margin: 1em 0;
    padding: 0.5em;
  }

  blockquote {
    padding: 0.5em 0.8em;
    margin: 0.8em 0;
  }
}
